// Generated by CoffeeScript 1.8.0
(function() {
  window.onload = function() {
    var TEX_SCALE, UNIT, animals, lastFrame, loader, playerController, playerSprite, render, renderer, stage, step, stillRendering, update;
    alert(new Vector().x);
    stage = new PIXI.Stage(0xffffff);
    renderer = PIXI.autoDetectRenderer(Screen.width(Screen.height));
    UNIT = bodyWidth / 100.0;
    TEX_SCALE = UNIT / 82.0;
    loader = new PIXI.AssetLoader(['img/animalTex.png']);
    document.body.appendChild(renderer.view);
    stillRendering = false;
    lastFrame = -1;
    playerSprite = PIXI.Sprite.fromImage('img/animalTex.png');
    playerSprite.tint = 0xcccccc;
    playerSprite.scale = new Vector(2 * TEX_SCALE, 2 * TEX_SCALE);
    stage.addChild(playerSprite);
    playerController = new PlayerController(new Animal());
    document.addEventListener("keydown", playerController.handleInput);
    document.addEventListener("keyup", plyerController.handleInput);
    animals = [playerController];
    update = function() {
      var animal, _i, _len, _results;
      _results = [];
      for (_i = 0, _len = animals.length; _i < _len; _i++) {
        animal = animals[_i];
        _results.push(animal.think());
      }
      return _results;
    };
    render = function() {
      if (!stillRendering) {
        stillRendering = true;
        renderer.render(stage);
        return stillRendering = false;
      }
    };
    step = function() {
      update();
      render();
      return requestAnimFrame(step);
    };
    loader.onComplete = function() {
      return step();
    };
    return loader.load();
  };

}).call(this);
